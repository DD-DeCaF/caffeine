<!--Copyright 2018 Novo Nordisk Foundation Center for Biosustainability, DTU.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<mat-sidenav-container fxFlexFill>
  <mat-sidenav #sidenav
               class="mat-elevation-z3"
               mode="side"
               opened="true">

    <mat-toolbar color="primary">
      <mat-toolbar-row fxLayout="row" fxLayoutAlign="space-between center">
        <h1>
          <a *ngIf="project" style="white-space: nowrap" routerLink="/app/project/{{ project.id }}">{{ project.name
            }}</a>
          <span *ngIf="project === null || project === undefined">Caffeine</span>
        </h1>

        <button type="button" mat-icon-button (click)="sidenav.close()">
          <mat-icon>chevron_left</mat-icon>
        </button>

      </mat-toolbar-row>
    </mat-toolbar>

    <section [hidden]="!fetchingData">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </section>

    <div *ngIf="project === null || project === undefined && (projects && projects.length > 0)">
      <mat-nav-list>
        <h3 mat-subheader>Projects</h3>
        <mat-list-item routerLink="/app/project/{{project.id}}" *ngFor="let project of projects">
          <mat-icon mat-list-icon [ngStyle]="{color: project.color}">folder</mat-icon>
          <p matLine>{{ project.name }}</p>
        </mat-list-item>
        <mat-divider></mat-divider>
      </mat-nav-list>
    </div>
    <mat-nav-list>
      <mat-list-item routerLink="/app/home">
        <mat-icon mat-list-icon>home</mat-icon>
        <p matLine>Home</p>
      </mat-list-item>
    </mat-nav-list>

  </mat-sidenav>

  <div fxFlexFill fxLayout="column">
    <app-toolbar [sidenav]="sidenav"></app-toolbar>

    <div fxFlex class='content'>
      <router-outlet>
      </router-outlet>
    </div>
  </div>
</mat-sidenav-container>
