<!--Copyright 2018 Novo Nordisk Foundation Center for Biosustainability, DTU.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<div class="container">
  <form class="design-form" #designForm="ngForm" (ngSubmit)="onSubmit()">
    <mat-card>
      <mat-form-field>
        <mat-label class="title">Organism*</mat-label>
        <mat-select type="text"
                    id="species"
                    class="form-control"
                    name="species"
                    ngModel
                    required
                    #species>
          <mat-option [value]="species" *ngFor="let species of (allSpecies | async)">{{species.name}}</mat-option>
        </mat-select>
        <mat-hint>*Required</mat-hint>
      </mat-form-field>
      <mat-form-field class="example-full-width">
        <mat-label class="title">Product*</mat-label>
        <input type="text"
               placeholder="Pick one"
               aria-label="Number"
               matInput
               name="product"
               ngModel
               required
               [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete"
                          [displayWith]="displayFn">
          <mat-option *ngFor="let product of (products | async)" [value]="product">
            {{product.name}}
          </mat-option>
        </mat-autocomplete>
        <mat-hint>*Required</mat-hint>
      </mat-form-field>
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Advanced
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="checkbox-group" [ngClass]="{'grid': sidenav==true}">
            <mat-label class="title">Select Databases</mat-label>
            <mat-checkbox name="bigg"
                          ngModel
                          value="false"
                          color="primary">BIGG
            </mat-checkbox>
            <mat-checkbox name="kegg"
                          ngModel
                          color="primary">KEGG
            </mat-checkbox>
            <mat-checkbox name="rhea"
                          ngModel
                          color="primary">RHEA
            </mat-checkbox>
          </div>
          <mat-form-field>
            <mat-label class="title">Model</mat-label>
            <mat-select name="model"
                        ngModel
                        [value]="selectedModel | async" #model>
              <mat-option [value]="model" *ngFor="let model of (models | async)">{{model.name}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <mat-label class="title">Number of pathways</mat-label>
            <input name="number_pathways"
                   ngModel
                   type="number"
                   placeholder="10"
                   matInput>
          </mat-form-field>
        </mat-expansion-panel>
      </mat-accordion>
      <button mat-button [disabled]="!designForm.valid" class="design-button" type="submit" #design>DESIGN</button>
    </mat-card>
  </form>
</div>
