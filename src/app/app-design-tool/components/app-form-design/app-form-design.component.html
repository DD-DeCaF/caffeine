<!--Copyright 2018 Novo Nordisk Foundation Center for Biosustainability, DTU.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<mat-card class="designCard">
  <form class="design-form" [formGroup]="designForm" (ngSubmit)="onSubmit()">
    <mat-label class="title">Organism*</mat-label>
    <mat-form-field>
      <mat-select type="text"
                  id="species"
                  placeholder="Escheria ecoli"
                  class="form-control"
                  formControlName="species"
                  #species>
        <mat-option [value]="species" *ngFor="let species of (allSpecies | async)">{{species.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-label class="title">Product*</mat-label>
    <mat-form-field class="example-full-width">
      <input type="text"
             placeholder="{{product_placeholder}}"
             aria-label="Number"
             matInput
             formControlName="product"
             [matAutocomplete]="auto"
             >
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let product of (products | async)" [value]="product.name">
          {{product.name}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <mat-label class="title">Project*</mat-label>
    <mat-form-field>
      <mat-select type="text"
                  color="primary"
                  class="form-control"
                  placeholder="Your project"
                  formControlName="project_id"
                  #projects>
        <mat-option color="primary"
                    class="mat-primary"
                    [value]="project.id"
                    *ngFor="let project of (allProjects | async)">{{project.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-label class="title">Aerobic</mat-label>
    <mat-checkbox
      formControlName="aerobic"
      color="primary">
    </mat-checkbox>
    <mat-accordion>
      <mat-expansion-panel class="expansion-panel">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Advanced
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="checkbox-group" [ngClass]="{'grid': gridView==true}">
          <mat-label class="title">Select Databases</mat-label>
          <mat-checkbox formControlName="bigg"
                        color="primary">BIGG
          </mat-checkbox>
          <mat-checkbox formControlName="rhea"
                        color="primary">RHEA
          </mat-checkbox>
        </div>
        <mat-label class="title">Model</mat-label>
        <mat-form-field>
          <mat-select formControlName="model"
                      #model>
            <mat-option [value]="model" *ngFor="let model of (models | async)">{{model.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-label class="title">Maximum predictions</mat-label>
        <mat-form-field>
          <input formControlName="max_predictions"
                 type="number"
                 matInput>
        </mat-form-field>
      </mat-expansion-panel>
    </mat-accordion>
    <button
      mat-button
      class="design-button"
      type="submit"
      color="primary"
      [disabled]="!designForm.valid"
      #design>DESIGN
    </button>
  </form>
</mat-card>
